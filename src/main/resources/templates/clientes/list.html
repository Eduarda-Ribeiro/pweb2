<!DOCTYPE html>
<html th:replace="~{fragments/layout :: layout(~{::head}, ~{::main})}">
<head th:replace="~{fragments/head :: head(~{}, ~{::title})}">
    <title>Lista de Clientes</title>
</head>
<body>
<main class="container mt-4">
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h4 class="mb-3">Filtrar Clientes</h4>
            <form th:action="@{/clientes/list}" method="get" class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Filtrar por nome do cliente:</label>
                    <input class="form-control" type="text" name="nome" th:value="${nome}">
                </div>
                <div class="col-md-3 d-flex align-items-end">
                    <input class="btn btn-outline-secondary w-100" type="submit" value="Enviar">
                </div>
            </form>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">
            <h4 class="mb-3">Clientes Registrados</h4>
            <div class="table-responsive">
                <table class="table table-striped table-hover">
                    <thead class="table-dark">
                    <tr>
                        <th>Id</th>
                        <th>Tipo</th>
                        <th>Nome</th>
                        <th>Documento</th>
                        <th>Email</th>
                        <th>Telefone</th>
                    </tr>
                    </thead>
                    <tr th:each="c : ${lista_clientes_bd}">
                        <td th:text="${c.id}"> </td>
                        <td th:text="${#strings.contains(c.class.name, 'PessoaFisica') ? 'Fisica' : 'Juridica'}"> </td>
                        <td th:text="${c.getNome()}"> </td>
                        <td th:text="${#strings.contains(c.class.name, 'PessoaFisica') ? 'CPF: ' + c.cpf : 'CNPJ: ' + c.cnpj}"> </td>
                        <td th:text="${c.email}"> </td>
                        <td th:text="${c.telefone}"> </td>
                        <td> <a th:href="@{/clientes/detail/{id}(id=${c.id})}" class="btn btn-outline-secondary btn-sm">Detalhar Vendas do Cliente</a> </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
</main>
</body>
</html>