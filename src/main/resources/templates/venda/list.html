<!DOCTYPE html>
<html th:replace="~{fragments/layout :: layout(~{::head}, ~{::main})}">
<head th:replace="~{fragments/head :: head(~{}, ~{::title})}">
    <title>Lista de Vendas</title>
</head>
<body>

<main class="container mt-4">
    <div class="card shadow-sm mb-4">
        <div class="card-body">
            <h4 class="mb-3">Filtrar Vendas</h4>
            <form th:action="@{/venda/list}" method="get" class="row g-3">
                <div class="col-md-6">
                    <label class="form-label">Data da Venda:</label>
                    <input class="form-control" type="datetime-local"
                           name="data"
                           th:value="${param.data}">
                </div>

                <div class="col-md-3 d-flex align-items-end">
                    <button class="btn btn-outline-secondary w-100" type="submit">Filtrar</button>
                </div>

            </form>
        </div>
    </div>

    <div class="card shadow-sm">
        <div class="card-body">

            <h4 class="mb-3">Vendas Registradas</h4>

            <table class="table table-striped table-hover">
                <thead class="table-dark">
                <tr>
                    <th>Id</th>
                    <th>Data</th>
                    <th>Total</th>
                    <th>Cliente</th>
                    <th>ID Cliente</th>
                    <th>Detalhes</th>
                </tr>
                </thead>

                <tbody>
                <tr th:each="v : ${lista_vendas_bd}">
                    <td th:text="${v.id}"></td>

                    <td th:text="${#temporals.format(v.data, 'dd/MM/yyyy HH:mm')}"></td>

                    <td>
                        R$ <span th:text="${v.total()}"></span>
                    </td>

                    <td th:text="${v.cliente.getNome()}"></td>

                    <td th:text="${v.cliente.id}"></td>

                    <td>
                        <a th:href="@{/venda/detail/{id}(id=${v.id})}"
                           class="btn btn-outline-secondary btn-sm">
                            Detalhar
                        </a>
                    </td>
                </tr>
                </tbody>
            </table>

        </div>
    </div>

</main>
</body>
</html>
